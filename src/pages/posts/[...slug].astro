---
import BaseLayout from "@src/layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const blogEntries = await getCollection("posts");
  return blogEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const { title, date } = entry.data;
const formattedDate = date.toLocaleDateString("en-GB", { dateStyle: "long" });

import { Image } from "astro:assets";
import ollie from "@src/images/ollie.jpg";
---

<BaseLayout {title}>
  <div class="max-w-2xl my-12 mx-auto flex justify-center">
    <a href="/">
      <Image
        src={ollie}
        width={600}
        height={600}
        alt=""
        class="rounded-full border-4 border-stone-300 max-w-24 hover:scale-125 transition-transform"
      />
    </a>
  </div>

  <div class="max-w-2xl mx-auto my-12">
    <h1 class="text-4xl my-6">{title}</h1>
    <p class="my-6 text-lg text-stone-500">{formattedDate}</p>
    <div class="prose prose-stone prose-lg">
      <Content />
    </div>
  </div>
</BaseLayout>
